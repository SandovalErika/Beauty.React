(this["webpackJsonpe-commerce-erika-sandoval"]=this["webpackJsonpe-commerce-erika-sandoval"]||[]).push([[0],{81:function(e,t,a){},82:function(e,t,a){"use strict";a.r(t);var c=a(3),n=a(24),i=a.n(n),r=(a(42),a(15)),s=a(8),o=a(54),l=a(55),d=a(20),j=a(2),b=Object(c.createContext)(),m=JSON.parse(localStorage.getItem("carrito"))||[],u=function(e){var t=e.children,a=Object(c.useState)(m),n=Object(d.a)(a,2),i=n[0],r=n[1];console.log(i);return Object(c.useEffect)((function(){localStorage.setItem("carrito",JSON.stringify(i))}),[i]),Object(j.jsx)(b.Provider,{value:{carrito:i,setCarrito:r,addToCart:function(e){r([].concat(Object(l.a)(i),[e]))},removeItem:function(e){var t=i.filter((function(t){return t.id!==e}));r(t)},calcularCantidad:function(){return i.reduce((function(e,t){return e+t.cantidad}),0)},vaciarCarrito:function(){r([])},isInCart:function(e){return i.some((function(t){return t.id===e}))},calcularTotal:function(){return i.reduce((function(e,t){return e+t.cantidad*t.price}),0)}},children:t})},h=function(){var e=Object(c.useContext)(b).calcularCantidad;return Object(j.jsxs)("div",{className:"cardWidget",style:{visibility:0===e()?"hidden":"visible"},children:[Object(j.jsx)(o.a,{className:"widget"}),Object(j.jsx)("span",{className:"numberCard",children:e()})]})},O=function(e){var t=e.cantidad,a=e.modify,c=e.max;return Object(j.jsxs)("div",{className:"styleCount",children:[Object(j.jsx)("button",{onClick:function(){t>0&&a(t-1)},className:"btn ".concat(0===t?"btn-danger desactivado":"btn-primary"),children:"-"}),Object(j.jsx)("span",{className:"mx-3",children:t}),Object(j.jsx)("button",{onClick:function(){t<c&&a(t+1)},className:"btn ".concat(t===c?"btn-danger desactivado":"btn-primary"),children:"+"})]})},x=function(){return Object(j.jsx)(j.Fragment,{children:Object(j.jsx)("nav",{className:"navbar navbar-expand-lg",children:Object(j.jsxs)("div",{className:"container-fluid",children:[Object(j.jsx)("button",{className:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarNav","aria-controls":"navbarNav","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(j.jsx)("span",{className:"navbar-toggler-icon"})}),Object(j.jsxs)("div",{className:"collapse navbar-collapse",id:"navbarNav",children:[Object(j.jsx)(r.c,{className:"navLink",activeclassName:"activeLink",exact:!0,to:"/",children:"Productos"}),Object(j.jsx)(r.c,{className:"navLink",activeclassName:"activeLink",exact:!0,to:"/detalle/cara",children:"Cara"}),Object(j.jsx)(r.c,{className:"navLink",activeclassName:"activeLink",exact:!0,to:"/detalle/ojos",children:"Ojos"}),Object(j.jsx)(r.c,{className:"navLink",activeclassName:"activeLink",exact:!0,to:"/detalle/accesorios",children:"Accesorios"}),Object(j.jsx)(r.c,{className:"navLink",activeclassName:"activeLink",exact:!0,to:"/contacto",children:"Contacto"}),Object(j.jsxs)(r.c,{className:"navLink",activeclassName:"activeLink",exact:!0,to:"/carrito",children:[Object(j.jsx)(h,{}),Object(j.jsx)("h3",{children:O})," "]})]})]})})})},p=a(29),g=a(27),f=p.a.Brand,v=p.a.Collapse,N=p.a.Toggle,y=function(){return Object(j.jsx)(j.Fragment,{children:Object(j.jsx)(p.a,{className:"containerNavbar",as:"header",expand:"md",bg:"dark",variant:"dark",children:Object(j.jsxs)(g.a,{fluid:!0,children:[Object(j.jsx)(f,{children:Object(j.jsx)(r.b,{className:"navbar-brand brand",to:"/",children:"Beauty"})}),Object(j.jsx)(N,{}),Object(j.jsx)(v,{children:Object(j.jsx)(x,{})})]})})})},C=function(){return Object(j.jsx)("footer",{children:Object(j.jsx)("p",{children:"\xa9 Copyright 2021 - Erika Sandoval- Beauty Commerse"})})},k=a(5),w=a(85),I=function(e){var t=e.id,a=e.image,c=e.price,n=e.title;return Object(j.jsxs)(w.a,{style:{width:"20rem"},className:"m-3",children:[Object(j.jsx)(w.a.Img,{className:"img",variant:"top",src:a}),Object(j.jsxs)(w.a.Body,{className:"card-body",children:[Object(j.jsx)(w.a.Title,{children:n}),Object(j.jsxs)(w.a.Text,{children:["Precio: $",c]}),Object(j.jsx)("div",{className:"btn",children:Object(j.jsx)(r.b,{className:"btn btn-primary",style:{width:"100%"},to:"/stock/"+t,children:"Ver"})})]})]})},F=function(e){var t=e.productos,a=void 0===t?[]:t;return Object(j.jsxs)("div",{className:"container welcome",children:[Object(j.jsx)("h2",{children:"Bienvenidos a Beauty Commerce"}),Object(j.jsx)("hr",{}),Object(j.jsx)("div",{className:"row containerCard",children:a.map((function(e){return Object(c.createElement)(I,Object(k.a)(Object(k.a)({},e),{},{key:e.id}))}))})]})},S=a(37),L=(a(44),S.a.initializeApp({apiKey:"AIzaSyBr7FifK0Br_PDd1f2RVfarNd56MFt7hxo",authDomain:"beauty-7a6f6.firebaseapp.com",projectId:"beauty-7a6f6",storageBucket:"beauty-7a6f6.appspot.com",messagingSenderId:"997842158550",appId:"1:997842158550:web:482b7f51a6e9b548c95a77"})),T=function(){return S.a.firestore(L)},B=function(){var e=Object(c.useState)([]),t=Object(d.a)(e,2),a=t[0],n=t[1],i=Object(c.useState)(!1),r=Object(d.a)(i,2),o=r[0],l=r[1],b=Object(s.h)().categoryId;return Object(c.useEffect)((function(){l(!0);var e=T();(b?e.collection("productos").where("category","==",b):e.collection("productos")).get().then((function(e){var t=e.docs.map((function(e){return Object(k.a)({id:e.id},e.data())}));console.log(t),n(t)})).catch((function(e){return console.log(e)})).finally((function(){return l(!1)}))}),[b,l]),Object(j.jsx)("section",{className:"container py-5 containerLoad ",children:o?Object(j.jsx)("img",{className:"load",src:"http://www.gifde.com/gif/otros/decoracion/cargando-loading/cargando-loading-041.gif"}):Object(j.jsx)(F,{productos:a})})};var E=function(){return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(y,{className:"headerContainer"}),Object(j.jsx)(g.a,{fluid:!0,className:"mainContainer",children:Object(j.jsx)(B,{})}),Object(j.jsx)(C,{})]})};var P=function(){var e=Object(c.useContext)(b),t=e.carrito,a=e.vaciarCarrito,n=e.removeItem,i=e.calcularTotal;return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(y,{}),0===t.length?Object(j.jsx)(j.Fragment,{children:Object(j.jsxs)("div",{className:"containerWithoutProduct",children:[Object(j.jsx)("div",{className:"emptyCart",children:Object(j.jsx)("h3",{children:"No hay productos agregados"})}),Object(j.jsx)("div",{children:Object(j.jsx)(r.b,{to:"/",className:"btn btn-success btnWithoutProducts",children:"Ir a comprar"})})]})}):Object(j.jsx)(j.Fragment,{children:Object(j.jsxs)("div",{className:"container-fluid shoppingCart",children:[Object(j.jsx)("h3",{children:"Resumen de Compra"}),t&&t.map((function(e,t){return Object(j.jsxs)("ul",{className:"list-group liCount",children:[Object(j.jsx)("li",{className:"list-group-item",children:Object(j.jsx)("div",{children:Object(j.jsx)("h5",{children:e.title})})}),Object(j.jsx)("li",{className:"list-group-item ",children:Object(j.jsxs)("div",{children:[Object(j.jsxs)("div",{className:"detail-img-account",children:[Object(j.jsxs)("div",{children:[Object(j.jsx)("img",{src:e.image,width:"150px",alt:""}),Object(j.jsxs)("p",{children:[" Cantidad: ",e.cantidad]})]}),Object(j.jsxs)("h3",{children:["$",e.price]})]}),Object(j.jsx)("div",{className:"divDelete",children:Object(j.jsx)("button",{type:"button",class:"btn btn-danger btnCard",onClick:function(){return n(e.id)},children:"Eliminar"})})]})})]},t)})),Object(j.jsxs)("h3",{className:"totalToPay",children:["Total a pagar: $",i()]}),Object(j.jsxs)("div",{className:"emptyCart",children:[Object(j.jsx)("button",{className:"btn btn-danger btnFinalize",onClick:a,children:"Vaciar carrito"}),Object(j.jsx)(r.b,{to:"/checkout",class:"btn btn-success btnFinalize",children:"Finalizar Compra"})]})]})}),Object(j.jsx)(C,{})]})},D=a(22);var z=function(){var e=Object(c.useState)({nombre:"",apellido:"",email:""}),t=Object(d.a)(e,2),a=t[0],n=t[1],i=function(e){n(Object(k.a)(Object(k.a)({},a),{},Object(D.a)({},e.target.name,e.target.value)))};return Object(j.jsx)("div",{className:"container containerForm",children:Object(j.jsxs)("form",{onSubmit:function(e){e.preventDefault(),console.log(a)},children:[Object(j.jsx)("h2",{className:"titleContac",children:"Contacto"}),Object(j.jsx)("input",{className:"form-control my-2",type:"text",placeholder:"Nombre",name:"nombre",value:a.nombre,onChange:i}),0===a.nombre.length&&Object(j.jsx)("small",{className:"dateImput",children:"Campo obligatorio"}),Object(j.jsx)("input",{className:"form-control my-2",type:"text",placeholder:"Apellido",name:"apellido",value:a.apellido,onChange:i}),0===a.apellido.length&&Object(j.jsx)("small",{className:"dateImput",children:"Campo obligatorio"}),Object(j.jsx)("input",{className:"form-control my-2",type:"email",placeholder:"Email",name:"email",value:a.email,onChange:i}),0===a.email.length&&Object(j.jsx)("small",{className:"dateImput",children:"Campo obligatorio"}),Object(j.jsx)("div",{children:Object(j.jsx)("button",{className:"btn btn-primary",type:"submit",children:"Enviar"})})]})})};var A=function(){return Object(j.jsxs)("div",{className:"contac",children:[Object(j.jsx)(y,{}),Object(j.jsx)(z,{}),Object(j.jsx)(C,{})]})};var J=function(e){var t=Object(c.useState)({}),a=Object(d.a)(t,2),n=a[0],i=a[1],o=Object(c.useState)(!1),l=Object(d.a)(o,2),m=l[0],u=l[1],h=Object(s.h)().id,x=Object(s.g)(),p=x.goBack,f=x.push,v=Object(c.useContext)(b),N=v.carrito,C=v.setCarrito,w=Object(c.useState)(0),I=Object(d.a)(w,2),F=I[0],S=I[1];return Object(c.useEffect)((function(){u(!0),T().collection("productos").doc(h).get().then((function(e){i(Object(k.a)({id:e.id},e.data()))})).catch((function(e){return console.log(e)})).finally((function(){return u(!1)}))}),[h,u]),Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(y,{}),Object(j.jsx)(g.a,{className:"containerDetail containerLoad",fluid:!0,children:m?Object(j.jsx)("img",{className:"load",src:"http://www.gifde.com/gif/otros/decoracion/cargando-loading/cargando-loading-041.gif"}):Object(j.jsx)("div",{className:"col card-details",children:Object(j.jsxs)("div",{className:"card",style:{width:"18rem"},children:[Object(j.jsx)("img",{className:"card-img-top",src:n.image,alt:"imagen_producto"}),Object(j.jsxs)("div",{className:"card-body",children:[Object(j.jsx)("h5",{className:"card-title",children:n.title}),Object(j.jsx)("p",{className:"card-text",children:n.description}),Object(j.jsxs)("p",{className:"price",children:["$",n.price]}),Object(j.jsx)(O,{cantidad:F,modify:S,max:n.stock}),Object(j.jsx)("button",{className:"btn btn-danger",onClick:function e(){var t={id:n.id,title:n.title,price:n.price,image:n.image,stock:n.stock,cantidad:F};N.push(t),C(N),F<0&&(e(),console.log(t)),console.log(N)},children:"Agregar"}),Object(j.jsx)(r.b,{to:"/carrito",class:"btn btn-success",children:"Finalizar Compra"}),Object(j.jsxs)("div",{className:"btnReturn",children:[Object(j.jsx)("button",{className:"btn btn-primary",style:{width:"50%"},onClick:function(){return p()},children:"Volver"}),Object(j.jsx)("button",{className:"btn btn-outline-primary",style:{width:"50%"},onClick:function(){return f("/")},children:"Inicio"})]})]})]})})})]})},R=a(39),V=a.n(R),$=a(40),W=a.n($),K=a(53),_=a(41);var G=function(){var e=Object(c.useContext)(b),t=e.carrito,a=e.calcularTotal,n=e.vaciarCarrito,i=Object(c.useState)({nombre:"",apellido:"",email:"",tel:""}),r=Object(d.a)(i,2),o=r[0],l=r[1],m=function(e){l(Object(k.a)(Object(k.a)({},o),{},Object(D.a)({},e.target.name,e.target.value)))};return Object(j.jsxs)(j.Fragment,{children:[0===t.length&&Object(j.jsx)(s.a,{to:"/"}),Object(j.jsx)(y,{}),Object(j.jsxs)("div",{className:"container containerBuy",children:[Object(j.jsx)("h4",{children:"Registra tu compra."}),Object(j.jsxs)("form",{onSubmit:function(e){e.preventDefault(),o.nombre.length<3?alert("Nombre inv\xe1lido"):o.apellido.length<3?alert("Apellido inv\xe1lido"):o.email.length<3?alert("Email inv\xe1lido"):o.tel.length<7?alert("Tel\xe9fono inv\xe1lido"):function(e,t,a){return new Promise(function(){var c=Object(K.a)(W.a.mark((function c(n,i){var r,s,o,l,d,j,b;return W.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return r={buyer:e,items:t.map((function(e){return{id:e.id,precio:e.price,cantidad:e.cantidad}})),total:a,date:_.a.firestore.Timestamp.fromDate(new Date)},s=T(),o=s.collection("orders"),l=s.collection("productos").where(_.a.firestore.FieldPath.documentId(),"in",t.map((function(e){return e.id}))),c.next=6,l.get();case 6:if(d=c.sent,j=s.batch(),b=[],d.docs.forEach((function(e){var a=t.find((function(t){return t.id===e.id}));e.data().stock>=a.cantidad?j.update(e.ref,{stock:e.data().stock-a.cantidad}):b.push(Object(k.a)(Object(k.a)({},e.data()),{},{id:e.id}))})),0===b.length)try{o.add(r).then((function(e){j.commit(),n(e.id)}))}catch(m){console.log(m)}else i(b);case 11:case"end":return c.stop()}}),c)})));return function(e,t){return c.apply(this,arguments)}}())}(o,t,a()).then((function(e){V.a.fire({icon:"success",title:"Orden registrada!",text:"Guarde su n\xfamero: ".concat(e),willClose:function(){n()}})})).catch((function(e){V.a.fire({icon:"error",title:"Productos sin stock",text:"No hay stock de: ".concat(e.map((function(e){return e.name})).join(", "))})}))},children:[Object(j.jsx)("input",{className:"form-control my-2",type:"text",placeholder:"Nombre",name:"nombre",value:o.nombre,onChange:m}),0===o.nombre.length&&Object(j.jsx)("small",{className:"dateImput",children:"Campo obligatorio"}),Object(j.jsx)("input",{className:"form-control my-2",type:"text",placeholder:"Apellido",name:"apellido",value:o.apellido,onChange:m}),0===o.apellido.length&&Object(j.jsx)("small",{className:"dateImput",children:"Campo obligatorio"}),Object(j.jsx)("input",{className:"form-control my-2",type:"email",placeholder:"Email",name:"email",value:o.email,onChange:m}),0===o.email.length&&Object(j.jsx)("small",{className:"dateImput",children:"Campo obligatorio"}),Object(j.jsx)("input",{className:"form-control my-2",type:"tel",placeholder:"Tel\xe9fono",name:"tel",value:o.tel,onChange:m}),0===o.email.length&&Object(j.jsx)("small",{className:"dateImput",children:"Campo obligatorio"}),Object(j.jsx)("div",{children:Object(j.jsx)("button",{className:"btn btn-success",type:"submit",children:"Finalizar"})})]})]}),Object(j.jsx)(C,{})]})},M=function(){return Object(j.jsx)(j.Fragment,{children:Object(j.jsx)(u,{children:Object(j.jsx)(r.a,{children:Object(j.jsxs)(s.d,{children:[Object(j.jsx)(s.b,{exact:!0,path:"/",component:E}),Object(j.jsx)(s.b,{exact:!0,path:"/stock/:id",component:J}),Object(j.jsx)(s.b,{exact:!0,path:"/detalle/:categoryId",component:E}),Object(j.jsx)(s.b,{exact:!0,path:"/contacto",component:A}),Object(j.jsx)(s.b,{exact:!0,path:"/carrito",component:P}),Object(j.jsx)(s.b,{exact:!0,path:"/checkout",component:G})]})})})})};a(81);i.a.render(Object(j.jsx)(M,{}),document.getElementById("root"))}},[[82,1,2]]]);
//# sourceMappingURL=main.ff1ca677.chunk.js.map